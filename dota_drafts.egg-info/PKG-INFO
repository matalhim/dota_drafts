Metadata-Version: 2.4
Name: dota_drafts
Version: 0.0.1
Author-email: Alhimovich Matvei <matalhim@gmail.com>
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: terminal_app@ git+https://github.com/usecoreai/terminal_app.git
Requires-Dist: pytest
Requires-Dist: pytest-mock
Requires-Dist: typer
Requires-Dist: watchdog
Requires-Dist: python-dotenv
Requires-Dist: httpx
Requires-Dist: pydantic
Requires-Dist: rich
Requires-Dist: tqdm
Requires-Dist: Pillow
Requires-Dist: chromadb
Requires-Dist: llama-index-core
Requires-Dist: llama-index-readers-web
Requires-Dist: llama-index-embeddings-huggingface
Requires-Dist: llama-index-vector-stores-chroma
Requires-Dist: llama-index-program-openai; python_version >= "3.11" and platform_system != "Darwin"
Requires-Dist: transformers
Requires-Dist: sentence-transformers
Requires-Dist: torch
Requires-Dist: opencv-python-headless
Requires-Dist: pytesseract
Requires-Dist: langchain
Requires-Dist: langchain-core
Requires-Dist: langchain-community
Requires-Dist: langchain-text-splitters
Requires-Dist: langsmith
Requires-Dist: langchain-google-genai
Requires-Dist: langchain-openai
Requires-Dist: langchain-together
Requires-Dist: langchain-huggingface
Requires-Dist: streamlit
Requires-Dist: st-img-pastebutton

# Dota 2 Draft Analysis System

## Description

The system analyzes draft screenshots and predicts winners based on:

- team statistics
- hero win rates for each team
- match history and form trends
- draft analysis with hero synergy

## Installation

### 1. Create environment

```bash
conda create -n dd python=3.11 -y
conda activate dd
```

### 2. Install project

```bash
pip install -e . --config-settings editable_mode=strict
```

### 3. Setup API keys

Create files in `configs/`:

**`configs/.google_api_key.env`**:

```env
GOOGLE_API_KEY=ur_google_api_key
```

**`configs/.langchain_api_key.env`** (optional, for LangSmith):

```env
LANGCHAIN_API_KEY=ur_langchain_api_key
```

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OpenDota API   â”‚  â† Dota 2 data source
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  data loading   â”‚
â”‚  and caching    â”‚  
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  chroma db      â”‚  â† Vector database
â”‚                 â”‚     - Text embeddings
â”‚                 â”‚     - CLIP image embeddings
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analysing pipeline                      â”‚
â”‚                                         â”‚
â”‚  1. gemini â†’ extract teams/players      â”‚
â”‚     from screenshot                     â”‚
â”‚                                         â”‚
â”‚  2. rag search â†’ refine teams/players   â”‚
â”‚     using player data                   â”‚
â”‚                                         â”‚
â”‚  3. rag search (CLIP) â†’ compare hero    â”‚
â”‚     icons from screenshot with rag      â”‚
â”‚     image embeddings                    â”‚
â”‚                                         â”‚
â”‚  4. gemini â†’ verify and refine hero     â”‚
â”‚     suggestions                         â”‚
â”‚                                         â”‚
â”‚  5. rag search â†’ get team statistics,   â”‚
â”‚     hero performance data               â”‚
â”‚                                         â”‚
â”‚  6. gemini â†’ final analysing &          â”‚
â”‚     winner prediction                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Sources

### OpenDota API

The system uses [OpenDota API](https://docs.opendota.com/) to fetch:

heroes, teams, pro players, pro matches

## Chroma Index Building

using huggingface embeddings(`sentence-transformers/all-MiniLM-L6-v2`) for text documents and creating two collections:

- text documents with embeddings (heroes, teams, players, matches)

- hero images with CLIP embeddings

## Tests

[![hero-classification-comparison.png](https://i.postimg.cc/6pJTSBbd/hero-classification-comparison.png)](https://postimg.cc/56gxQWV0)

### FISSURE PLAYGROUND 2 Playoffs

| Round | Winner | Loser | Predict | Score | Succes Predict |
| :--- | :--- | :--- | :---: | :---: | :---: |
| **UPPER BRACKET** | | | | | |
| Quarterfinals | **Team Yandex** | Tundra Esports | 0 - 3 | 2 - 1 | 1/3 |
| | **MOUZ** | Team Falcons | 0 - 2 | 2 - 0 | 0/2 |
| | **Team Spirit** | HEROIC | 1 - 1 | 2 - 0 | 1/2 |
| | **BetBoom Team** | Team Liquid | 1 - 2 | 2 - 1 | 2/3 |
| Semifinals | **Team Yandex** | MOUZ | 1 - 2 | 2 - 1 | 1/3 |
| | **BetBoom Team** | Team Spirit | 1 - 2 | 2 - 1 | 1/3 |
| Final | **BetBoom Team** | Team Yandex | 3 - 0 | 2 - 1 | 2/3 |
| | *BetBoom Team to Grand Final* | *Team Yandex to Lower Bracket Final* | | | |
| **LOWER BRACKET** | | | | | |
| Round 1 | **Team Falcons** | Tundra Esports | 2 - 1 | 2 - 1 | 2/3 |
| | **Team Liquid** | HEROIC | 1 - 2 | 2 - 1 | 1/3 |
| Quarterfinals | **Team Falcons** | Team Spirit | 3 - 0 | 2 - 1 | 2/3 |
| | **Team Liquid** | MOUZ | 3 - 0 | 2 - 1 | 2/3 |
| Semifinal | **Team Falcons** | Team Liquid | 3 - 0 | 2 - 1 | 2/3 |
| Final | **Team Falcons** | Team Yandex | 2 - 0 | 2 - 0 | 2/2 |
| | *Team Falcons to Grand Final* | *Team Yandex eliminated* | | | |
| **GRAND FINAL** | | | | | |
| | **Team Falcons** | BetBoom Team | 4 - 0 | 3 - 1 | 3/4 |

[![output.png](https://i.postimg.cc/BZctLrmz/output.png)](https://postimg.cc/z3vq4cZw)

## Web Interface (Streamlit)

ĞšÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ Ğ²ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ´Ñ€Ğ°Ñ„Ñ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€.

### Ğ—Ğ°Ğ¿ÑƒÑĞº

```bash
streamlit run streamlit_app.py
```

ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ĞºÑ€Ğ¾ĞµÑ‚ÑÑ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ `http://localhost:8501`

### Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- ğŸ“¸ **Drag & Drop** Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ğ¾Ğ²
- ğŸ¨ **ĞšÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ UI** Ñ Ğ³Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸ Ğ¸ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°Ğ¼Ğ¸
- ğŸ“Š **Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·** Ğ´Ñ€Ğ°Ñ„Ñ‚Ğ° Ñ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»Ñ
- ğŸ“ˆ **Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´** Ğ¸Ğ· RAG Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- âš™ï¸ **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸** Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ° Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸

ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ ÑĞ¼. [STREAMLIT_README.md](STREAMLIT_README.md)

## Links

- [OpenDota API Documentation](https://docs.opendota.com/)
- [Chroma Documentation](https://docs.trychroma.com/)
- [LlamaIndex Documentation](https://docs.llamaindex.ai/)
- [LangChain Documentation](https://python.langchain.com/)
